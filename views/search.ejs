<html>
    <head>
        <title>Stats - <%= data.data.metadata.platformUserId %></title>
        <link href="/assets/search.css" rel="stylesheet" type="text/css"/>
        <script src="https://code.jquery.com/jquery-3.3.0.min.js"
             integrity="sha256-RTQy8VOmNlT6b2PIRur37p6JEBZUE7o8wPgMvu18MC4="
            crossorigin="anonymous">
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('.stats').scroll(function(){
                    if($(this).scrollTop() > 0){
                        $(".form-search").css({"opacity" : "0"})
                    }
                    else{
                        $(".form-search").css({"opacity": "1"});
                    }
                });
            });
        </script>
        <script src="/assets/search.js" type="text/javascript"></script>
    </head>
    <%  var pathfinder = "https://cdn3.whatculture.com/images/2019/02/b9a66d3bad0db6fc-600x338.png";
        var lifeline = "https://cdn.vox-cdn.com/thumbor/8eFOQV8hAOBsQNTLVWDZjZ-4uAw=/0x0:1920x1080/1200x800/filters:focal(903x276:1209x582)/cdn.vox-cdn.com/uploads/chorus_image/image/63050039/apex_concept_art_wallpaper_lifeline.0.png";
        var octane = "https://cdn.vox-cdn.com/thumbor/nji89F2ThxiNP3dMfF5pZmaI9Wo=/0x0:2048x1152/1200x800/filters:focal(905x160:1231x486)/cdn.vox-cdn.com/uploads/chorus_image/image/63258782/apex_legends_octane_celebration_2048.0.jpg";
        var bangalore = "https://cdn.vox-cdn.com/thumbor/09JO1877ZTSEn6U6RZkHIXr2MlQ=/0x0:1920x1080/1200x800/filters:focal(573x370:879x676)/cdn.vox-cdn.com/uploads/chorus_image/image/63049022/PREVIEW_SCREENSHOT3_174019.0.0.jpg";
        var wraith = "https://cdn.vox-cdn.com/thumbor/Fqn-5PMVAhduF184wV9QNXa66js=/0x0:1455x818/1200x800/filters:focal(612x293:844x525)/cdn.vox-cdn.com/uploads/chorus_image/image/63002764/apex_concept_art_wallpaper_wraith.0.jpg";
        var gibby = "https://dotesports-media.nyc3.cdn.digitaloceanspaces.com/wp-content/uploads/2019/02/12053801/gibraltar-apex-legends.jpg";
        var caustic = "https://cdn.vox-cdn.com/thumbor/moSwvndPYH1_zszqHH8T1EoMtpg=/0x0:1920x1080/1200x800/filters:focal(584x100:890x406)/cdn.vox-cdn.com/uploads/chorus_image/image/63568171/PREVIEW_SCREENSHOT5_174019.0.0.jpg";
        var bloodhound = "https://www.vgr.com/wp-content/uploads/2019/02/apex-legends-gameplay-13-4-600x300.jpg";
        var mirage = "https://media.contentapi.ea.com/content/dam/apex-legends/images/2019/01/legends-heros/apex-hero-medium-legends-concept-mirage-video-7x2-xl.jpg.adapt.crop3x5.320w.jpg";
        var wattson =   "https://s3.amazonaws.com/prod-media.gameinformer.com/styles/full/s3/2019/07/05/4eb3a13f/wattson.jpg";
    %>


    <body>
        <div class="main-container">
            <div class="header">
                <div class="stattracker-bg"></div>
                <span id="text">APEX LEGENDS <span>STATS TRACKER</span></span>
                <div class="form-search">
                    <form method="POST" action="http://localhost:3000/search">
                        <input type="text" id="playerName" name="playerName" placeholder="Search player name...">
                    </form>
                </div>
            </div>

            <div class="bottom">
                <div class="bottom-bg">s</div>
          
                    <div class='stats'>
                        <div class="stats-header-left-bg"></div>
                        <div class="stats-header-content">
                            <div class="stats-header-content-bg"></div>
                            <img id="x" src='<%=data.data.metadata.avatarUrl%>'>
                            <span><%= data.data.metadata.platformUserId %></span>
                        </div>

                        <div class="lifetimestats">
                            <div class="lifetimestats-bg"></div>
                            <div class="lifetimestnats-content-container">
                            <% for(var i = 0; i < data.data.stats.length; i++) { %>
                                <div class="lifetimestats-content">
                                    <span id="tooltip">RANK <%=data.data.stats[i].displayRank%></span>
                                    <span id="key"><%= data.data.stats[i].metadata.name %></span>
                                    <span id="value"><%= data.data.stats[i].displayValue %></span>
                                    <span id="rank"><%= data.data.stats[i].displayPercentile %></span>
                                </div>
                            <% } %>
                        </div>
                        </div>
                       

                       
                        <div class="stats-left-bg"></div>
                        <div class="stats-left-bg-content">
                            <span>LIFETIME<br>STATS</span>
                        </div>

                        <div class ="mid">
                            <div class="mid-bg"></div>
                            <span>STATS BY LEGEND</span>
                        </div>
                        <% var l;
                            for (var i = 0; i < data.data.children.length; i++) { %>
                                <% 
                                    switch(data.data.children[i].metadata.legendName){
                                        case 'Lifeline':
                                            l = lifeline;
                                            break;
                                        case 'Bangalore':
                                            l = bangalore;
                                            break;
                                        case 'Wraith':
                                            l = wraith;
                                            break;
                                        case 'Caustic':
                                            l = caustic;
                                            break;
                                        case 'Pathfinder':
                                            l = pathfinder;
                                            break;
                                        case 'Gibraltar':
                                            l = gibby;
                                            break;
                                        case 'Octane':
                                            l = octane;
                                            break;
                                        case 'Bloodhound':
                                            l = bloodhound;
                                            break;
                                        case 'Mirage':
                                            l = mirage;
                                            break;
                                        case 'Wattson':
                                            l = wattson;
                                            break;
                                        default:
                                            break;
                                    } 
                                %>
                                <div class="legend-stats">
                                    <div class="bestlegend-bg"></div>
                                    <div class="bestlegend-left-bg"
                                        style=" 
                                            background: url('<%=l %>');
                                            background-size: 425px 425px;"></div>
                                    <div class="bestlegend-left-bg-content">
                                            <span id="legendname"><%= data.data.children[i].metadata.legendName %></span>
                                        <div class="stats-container">
                                        <% for(var x = 0; x < data.data.children[i].stats.length; x++){ %>
                                            <div class="stats-content">
                                                <span id="tooltip">RANK <%=data.data.children[i].stats[x].displayRank %></span>
                                                <span id="key" ><%=data.data.children[i].stats[x].metadata.name%></span>
                                                <span id="value"><%=data.data.children[i].stats[x].value%></span>
                                                <span id="rankk"><%=data.data.children[i].stats[x].displayPercentile%></span>
                                            </div>
                                        <% } %>
                                        </div>
                                           
                                    </div>
                                  
                      
                                </div>
                        <% } %>

            


                        <div class="test"></div>
                    </div>
            
            </div>

        </div>
    </body>
</html>

<script>
        var header = document.getElementsByClassName('header');
        var form = document.getElementsByClassName('form-search');
        var text = document.getElementById('text');
        var x = "<%= didVisit %>";
        console.log(x);
        function stopAnimation(header, form, text){
            $(header).css("animation", "none");
            $(header).css("height", "285px");
            $(form).css("animation", "none");
            $(form).css("top", "45px");
            $(text).css("animation", "none");
            $(text).css("top", "0");
        }

        if(x==1){
            stopAnimation(header, form, text);
        }
</script>